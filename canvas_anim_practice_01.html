<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

	<canvas id="canvas" width="270" height="199" style="width:270px;height:199px;"></canvas>

<script>
window.onload = function()
{
	var cvs = document.getElementById('canvas');
	var ctx = cvs.getContext('2d');
	var bgimg = new Image();
	var charaimg = new Image();

	bgimg.src = 'granblue/quest_bg_back_04qb_land_img.png';
	bgimg.onload = function()
	{
		ctx.drawImage(bgimg, 0 , 0);
	}

	charaimg.src = 'viela.png'
	charaimg.onload = function()
	{
		ctx.drawImage(charaimg, 50 , 0, charaimg.width*0.7, charaimg.height*0.7);
	}

	document.onkeydown = function(e)
	{
		move(e.keyCode);
	}

	function move(input_key)
	{
		var cvs = document.getElementById('canvas');
		var ctx = cvs.getContext('2d');
		var cnt = 0;
		var x = 50;
		var y = 0;

		function render()
		{
			cvs.width = cvs.width;

			if(input_key==37)
			{
				x = x-1;
			}
			if(input_key==38)
			{
				// 上に移動
				y = y-1;
			}
			if(input_key==39)
			{
				// 右に移動
				x = x+1;

			}
			if(input_key==40)
			{
				// 下に移動
				y = y+1;
			}

			ctx.drawImage(bgimg, 0 , 0);
			ctx.drawImage(charaimg, x , y, charaimg.width*0.7, charaimg.height*0.7);

			if(++cnt === 30)
			{
				return;
			}

			window.requestAnimationFrame(render);

		}
		window.requestAnimationFrame(render);
	}


}


</script>

</body>
</html>